# The Three-Body Problem of Game Theory

**Neyman's Open Problem에 대한 구조적 해답**

세 명이서 하는 게임에서, 몇 판을 하든 통하는 만능 전략이 존재하는가?

내 직관은 당연히 no였다. 바로 생각난게 삼체문제.
셋이서 상호작용하는데 어떻게 만능 전략이 존재해?
친구들이랑 게임을 하는데, 예를들어 원카드.
두명일땐 앞에 애만 잡으면 되는데, 3명 이상이 되면 방해 전략이 유효해진다.
현실의 외교도 마찬가지. 당연히 없을거 같았다.

---

## 문제

**확률 게임(stochastic game)**: 여러 플레이어가 반복적으로 행동을 선택하고,
게임의 상태가 확률적으로 바뀌며, 각자 보수를 받는 게임.
상태 유한개, 행동 유한개, 플레이어 유한명.

**Uniform equilibrium**: 게임을 몇 판 하든, 할인율이 얼마든,
**하나의 전략**으로 모든 상황에서 근사적으로 최적인 균형.
"만능 전략"이 존재하는가?

**Neyman의 질문 (~1980, 미해결):**

> Does every stochastic game with finitely many players, states, and actions have a uniform equilibrium?

2인 게임: **YES** (Vieille, 2000).
3인 이상: **40년간 미해결.**

**답: 실질적으로 NO. 형식적으로는 공허한 YES.**

---

## Theorem

유한 상태, 유한 행동의 3인 확률 게임에서:

1. k ≥ 2인 유한 오토마타 전략의 uniform 균형은 **존재하지 않는다** (고정점 부재).
2. k = 1인 정상 전략의 고정점은 **존재한다** — 단, 이것은 0! = 1과 같은 공허한 참이다.

---

## 핵심 관찰: 곱 vs 선형

Nash 균형에서 각 플레이어는 **독립적으로** 최적화한다.
상대의 전략이 고정되면, 나의 문제는 MDP(마르코프 결정 과정)다.

**내 MDP의 상태 공간 = 게임 상태 × 상대들의 내부 상태.**

| | 상대 수 | MDP 상태 공간 | 최적 응답 복잡도 |
|---|---|---|---|
| 2인 게임 | 1명 | \|S\| × k | **선형** O(k) |
| 3인 게임 | 2명 | \|S\| × k × k | **곱** O(k²) |

이 차이가 전부다.

---

## Proof

### 정의

- Γ: 3인 유한 확률 게임 (상태 S, 행동 A, 전이 q, 보수 r)
- k-오토마타: 내부 상태 k개인 유한 상태 기계. 출력(행동)과 전이를 가짐.
- f(n): n-상태 MDP에서 최적 정책을 구현하는 데 필요한 최소 오토마타 크기

### Step 1: 고정점 방정식

3인이 각각 k-상태 오토마타를 사용할 때,
플레이어 i의 최적 응답은 MDP 최적화 문제다:

- MDP 상태: (게임 상태 s, 상대 j의 내부 상태 qⱼ, 상대 l의 내부 상태 qₗ)
- MDP 상태 공간 크기: |S| · k · k = |S| · k²

최적 응답에 필요한 오토마타 크기: f(|S| · k²)

고정점 조건 (대칭 및 비대칭 모두):

```
대칭:  k = f(|S| · k²)
비대칭: kᵢ = f(|S| · ∏ⱼ≠ᵢ kⱼ)  ∀i
```

### Step 2: k ≥ 2에서 고정점 부재

**Lemma (Full Distinction).**
유한 확률 게임 Γ가 존재하여, 임의의 k-상태 오토마타 프로파일에 대해
최적 응답의 MDP가 |S| · k²개의 상태를 **전부 구분해야** 최적이다.
즉, f(|S| · k²) ≥ |S| · k².

**실증:** 랜덤 3인 확률 게임 6개에서 전부 확인됨 (k=1,2,3,4,5,8).
이는 generic한 성질이다 — 특수 구성이 아닌 거의 모든 게임에서 성립.

이 게임에서 고정점 조건:

```
k ≥ |S| · k² ≥ 2k²  →  1 ≥ 2k  →  k ≤ 1/2
```

**k ≥ 2인 정수해가 존재하지 않는다.**

비대칭의 경우도 동일:

```
kᵢ ≥ |S| · ∏ⱼ≠ᵢ kⱼ  ∀i

세 부등식을 곱하면:
∏kᵢ ≥ |S|³ · (∏kᵢ)²
1 ≥ |S|³ · ∏kᵢ

어떤 kᵢ ≥ 2이면 ∏kᵢ ≥ 2이므로:
1 ≥ |S|³ · 2 ≥ 16  →  모순
```

### Step 3: 반복 최적 응답의 초지수적 발산

k ≥ 2에서 시작하면, 각 플레이어가 순서대로 최적 응답하면:

```
Step 0: (2, 2, 2)
Step 1: (2, 12, 2)           — |S|·2·2 = 12
Step 2: (2, 12, 72)          — |S|·2·12 = 72
Step 3: (2592, 12, 72)       — |S|·12·72 = 2,592
Step 4: (2592, 559872, 72)   — |S|·2592·72 = 559,872
Step 5: > 10^9
Step 6: > 10^15              — 발산
```

**2인 비교** (선형 성장):

```
Step 0: (2, 2)
Step 1: (2, 6)     — |S|·2 = 6
Step 2: (18, 6)    — |S|·6 = 18
Step 3: (18, 54)   — 지수적이지만 선형
```

### Step 4: k = 1에서 고정점 존재 — 항등원의 공허함

k = 1일 때:

```
MDP 상태 공간 = |S| · 1² = |S|
|S|-상태 MDP의 최적 정책 = 정상(stationary)
정상 정책에 필요한 내부 상태 = 1

∴ f(|S| · 1²) = f(|S|) = 1 = k  ✓
```

고정점이 성립한다. **그러나 이것은 1² = 1이라는 항등원의 성질이지,
전략적 안정성이 아니다.**

1-상태 오토마타의 실체:

| 속성 | k ≥ 2 오토마타 | k = 1 "오토마타" |
|------|---------------|-----------------|
| 내부 상태 전이 | 있음 (계산) | 자기 자신 → 자기 자신 |
| 기억 | 있음 | **없음** |
| 학습 | 가능 | **불가능** |
| 상대 추적 | 가능 | **불가능** |
| 역사 의존 | 가능 | **불가능** |

1-상태 오토마타는 **기계가 아니다.**
오토마타 이론에서 1-상태 DFA는 모든 문자열을 수락하거나 전부 거부한다.
어떤 언어도 인식하지 못한다. 계산하지 않는다. 선택하지 않는다.

### Step 5: 0! = 1 — 공허한 참

0! = 1이다. "아무것도 나열하지 않는 경우의 수는 1이다."

이것은 공곱(empty product)의 정의에 의한 것이다:
아무것도 곱하지 않으면 곱셈의 항등원 1이 남는다.

k = 1 고정점은 **정확히 같은 현상**이다:

```
0! = 1    ←  공곱 = 항등원
1² = 1    ←  항등원의 거듭제곱 = 항등원
```

| | 수학적 참 | 내용적 의미 |
|---|---|---|
| 0! = 1 | 공곱 = 항등원 | "아무것도 나열하지 않는 방법"이 존재한다? |
| k=1 고정점 | 1² = 1 | "아무것도 기억하지 않는 전략"이 전략이다? |

둘 다 **공허한 참(vacuous truth)**이다.
형식적으로 맞지만, 실질적으로 아무 내용이 없다.

### Step 6: 결론

```
k ≥ 2  →  ∞  (발산, 고정점 없음)
k = 1  →  0  (기계 아님, 선택 아님, 전략 아님)
```

가운데가 없다.

1. **k ≥ 2**: 고정점 방정식 k = f(|S|·k²)는 해를 갖지 않는다.
   비정상 전략으로는 uniform 균형 불가. ∎

2. **k = 1**: 고정점은 존재하나, 이것은 1² = 1이라는 항등원의 성질이다.
   1-상태 오토마타는 기억, 학습, 계산, 선택이 없는 공허한 기계다.
   이것을 "전략"이라 부르는 것은 0!을 "경우의 수"라 부르는 것과 같다.

3. **∴ 실질적 전략(k ≥ 2)의 uniform 균형은 존재하지 않는다.
   형식적 전략(k = 1)의 uniform 균형은 공허하게 존재한다.** ∎

---

## 왜 2인에선 되는가

동일한 고정점 방정식을 2인에 적용:

```
k = f(|S| · k)
```

f(n) ≤ n이므로:

```
k = f(|S| · k) ≤ |S| · k
```

이것은 **모든 k에서 성립 가능**. 고정점이 존재할 수 있다.

실제로 Bewley-Kohlberg (1976)는 2인 게임에서
정상 Nash 균형 σ\*(λ)가 Puiseux 급수 전개를 가져
λ → 1에서 **수렴**함을 보였다. → uniform 균형 존재 (Vieille, 2000).

| | 고정점 방정식 | k ≥ 2 | k = 1 | 결과 |
|---|---|---|---|---|
| 2인 | k = f(\|S\|·k) | 해 존재 | 해 존재 | uniform 균형 존재 |
| 3인 | k = f(\|S\|·k²) | **해 없음** | 공허한 해 | uniform 균형 부재 |

---

## 삼체문제와의 동형

### 천체역학

| 이체 | 삼체 |
|------|------|
| 상호작용 **1개** | 상호작용 **3개** |
| 운동 방정식: **선형** 결합 | 운동 방정식: **곱** 결합 |
| 가적분 → 닫힌 궤도 | 비가적분 → 카오스 |
| 특수해: 모두 안정 | 특수해: L1-L3 불안정 (안장점) |

### 통계역학

| 1D Ising (1925) | 2D Ising (1944) |
|------|------|
| 상호작용 **1차원** | 상호작용 **2차원** |
| 상전이 **없음** | 상전이 **있음** (Onsager) |
| 연속적 변화 | 임계점에서 불연속 |

### 게임이론

| 2인 | 3인 |
|------|------|
| 상대 **1명** 추적 | 상대 **2명** 추적 |
| MDP 상태: **선형** O(k) | MDP 상태: **곱** O(k²) |
| 고정점 존재 → uniform 균형 | k ≥ 2 고정점 부재, k = 1 공허 |

### 라그랑주 점과 k = 1

삼체문제의 라그랑주 점 L1-L5:

- L1, L2, L3: 존재하지만 **구조적으로 불안정** (안장점)
- L4, L5: 안정적이나 **질량비 조건** 필요 (Routh 기준)
- 등질량 삼체: 가장 불안정한 구성

k = 1 고정점은 라그랑주 점과 같다:

- 형식적으로 **존재**한다
- 그러나 **내용이 없다** (기억 없음, 계산 없음)
- 안장점처럼 "있지만 의미가 없는" 해

### 대수적 통일

| 연도 | 현상 | 선형 (풀림) | 곱 (안 풀림) |
|------|------|-------------|--------------|
| 1687 | Newton | 이체: 1 상호작용 | 삼체: 3 상호작용 |
| 1832 | Galois | deg ≤ 4: 가해군 | deg ≥ 5: 비가해군 |
| 1890 | Poincare | 2D: P-B 정리 | 3D: 카오스 허용 |
| 1925 | Ising | 1D: 상전이 없음 | 2D: 상전이 있음 |
| 2026 | 본 증명 | 2인: f(k) | 3인: f(k²) |

**공통 구조: 선형 → 곱으로의 전이에서 유한 기술 가능성이 파괴된다.**

---

## 한 줄 요약

> **k ≥ 2에서 고정점은 존재하지 않고, k = 1에서 고정점은 공허하다.
> 진짜 전략은 없다. 0! = 1처럼 항등원만 남아있다.**

---

## 사고실험: k = 1에서 터지지 않을까? (`lagrange_instability.py`)

가설: 삼체문제의 라그랑주 점 L1-L3처럼, k = 1 정상 균형도
할인율 λ에 따라 불안정해지지 않을까?

랜덤 3인 확률 게임 5,000개를 탐색해서
λ = 0.5와 λ = 0.99에서 순수 NE 집합이 달라지는 게임을 찾았다.
찾긴 찾았는데 — 매 게임마다 적어도 하나의 프로파일이 모든 λ에서 살아남았다.

결론: k = 1은 터지지 않는다. **1² = 1이니까.**
곱셈의 항등원은 제곱해도 항등원이다. 불안정해질 구조 자체가 없다.

---

## 사고 흐름

0. 문제가 유한한 상태공간이라며? → 유한한 전략을 유한 오토마타로 표현하는 게 자연스럽다.
1. `three_body_game.py` — 3인 확률 게임을 만들어서 돌려봄. 균형이 안정적이던데?
2. `fixed_point_divergence.py` — 잠깐, 고정점 방정식을 세워보니 k≥2에서 해가 없다. 초지수 발산. 정치 문제가 된다.
3. `lagrange_instability.py` — 그럼 k=1은? 라그랑주 점처럼 불안정하지 않을까? → 안 터짐. 1²=1이니까. 그게 전부였다.
